{{ $baseUrl := .Site.BaseURL }}

<div>

<!-- 
  <video id="video-background" class="video-background" no-controls autoplay loop src="{{ $baseUrl }}background.mp4" poster="{{ $baseUrl }}background.png"></video>
 -->

  <div id="sidebar-background" class="sidebar-background">
    
  </div>
 
  <div class="header-title">

    {{ if not .IsHome }}

    <div class="avatar-container">
      <a href="{{ $baseUrl }}">
        <img class="avatar" src="{{ $baseUrl }}img/avatar4.png" alt="Avatar">
      </a>
    </div>

    {{ end }}

    <div class="title-container">
      {{ if .IsHome }}
        <span class="title"></span>
      {{ else }}
        <span class="title">Elad Gariany</span>
      {{ end }}
    </div>

    {{ if not .IsHome }}

    <div class="tagline-container">
      <p class="tagline">
        Artist and software engineer based in the San Francisco Bay Area.
      </p>

      <div class="tagline">
        <p class="sidebar-btn"><a href="/about">About</a></p>
        <p class="sidebar-btn"><a href="/contact">Contact Me</p>
      </div>

    </div>

    {{ end }}

    <div class="navigation-container">
      <!-- category list -->

      {{ if not .IsHome }}
        {{ partial "list-categories.html" . }}
      {{ end }}

      <!-- tags list -->
      {{ if .IsHome }}
        {{ partial "list-tags.html" . }}
      {{ end }}
    </div>

    {{ partial "list-social.html" . }}
    
  </div>
</div>

<script type="text/javascript">

// this is expermental, performance is still not good enough for this to be production ready...
// var strechAndPlayVideo = function () {
//   var $video = document.getElementById("video-background");

//   var scaleToFill = function() {

//     console.log("in scaleToFill");

//     var sidebar = document.getElementsByClassName("sidebar")[0];

//     var videoRatio = $video.videoWidth / $video.videoHeight;
//     var tagRatio = sidebar.offsetWidth / sidebar.offsetHeight;
//     var scale;
          
//     if (videoRatio <= tagRatio) {
//        scale = tagRatio / videoRatio * 1.02;
//     } else if (tagRatio < videoRatio) {
//        scale = videoRatio / tagRatio * 1.02;
//     }

//     if (sidebar.offsetHeight > sidebar.offsetWidth ) {
//       $video.style.transform = `scale(1,${scale})`;
//       $video.style.display = "block";
//     } else {
//       $video.style.display = "none";
//     }
//   };

//   var canPlay = function() {
//     $video.pause();
//     $video.play();
//   }

//   $video.onloadeddata = scaleToFill;
//   $video.oncanplaythrough = canPlay;
  
//   window.onresize = scaleToFill;
// };

// strechAndPlayVideo();

window.onscroll = function() {
  if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
    document.getElementById("sidebar-background").className = "sidebar-background sidebar-hide";
  } else {
    document.getElementById("sidebar-background").className = "sidebar-background";
  }  
}

</script>